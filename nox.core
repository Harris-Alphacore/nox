CAPI=2:
name: core:nox:v0.0.1
description: Nox RISC-V core

filesets:
  rtl_nox:
    files:
      - rtl/inc/axi_pkg.svh: {is_include_file: true}
      - rtl/inc/ahb_pkg.svh: {is_include_file: true}
      - rtl/inc/nox_pkg.svh: {is_include_file: true}
      - rtl/inc/core_bus_pkg.svh: {is_include_file: true}
      - rtl/inc/riscv_pkg.svh: {is_include_file: true}
      - rtl/inc/eth_pkg.svh: {is_include_file: true}
      - rtl/inc/utils_pkg.sv
      - rtl/fetch.sv
      - rtl/fifo_nox.sv
      - rtl/nox.sv
      - rtl/wb.sv
      - rtl/reset_sync.sv
      - rtl/csr.sv
      - rtl/execute.sv
      - rtl/cb_to_axi.sv
      - rtl/cb_to_ahb.sv
      - rtl/register_file.sv
      - rtl/lsu.sv
      - rtl/skid_buffer.sv
      - rtl/decode.sv
    file_type: systemVerilogSource

  uart_axi:
    files:
      - xlnx/rtl/wbuart32/rtl/txuart.v
      - xlnx/rtl/wbuart32/rtl/rxuartlite.v
      - xlnx/rtl/wbuart32/rtl/rxuart.v
      - xlnx/rtl/wbuart32/rtl/skidbuffer.v
      - xlnx/rtl/wbuart32/rtl/ufifo.v
      - xlnx/rtl/wbuart32/rtl/txuartlite.v
      - xlnx/rtl/wbuart32/rtl/axiluart.v
      - xlnx/rtl/wbuart32/rtl/wbuart.v
    file_type: systemVerilogSource

  verilog_axi:
    files:
      - xlnx/rtl/verilog-axi/rtl/axi_ram_wr_if.v
      - xlnx/rtl/verilog-axi/rtl/axi_axil_adapter.v
      - xlnx/rtl/verilog-axi/rtl/axi_adapter_rd.v
      - xlnx/rtl/verilog-axi/rtl/axi_register_wr.v
      - xlnx/rtl/verilog-axi/rtl/axi_dp_ram.v
      - xlnx/rtl/verilog-axi/rtl/axi_adapter_wr.v
      - xlnx/rtl/verilog-axi/rtl/axi_ram.v
      - xlnx/rtl/verilog-axi/rtl/axi_register_rd.v
      - xlnx/rtl/verilog-axi/rtl/axil_register_wr.v
      - xlnx/rtl/verilog-axi/rtl/axi_crossbar_rd.v
      - xlnx/rtl/verilog-axi/rtl/axil_adapter_rd.v
      - xlnx/rtl/verilog-axi/rtl/axi_crossbar_wr.v
      - xlnx/rtl/verilog-axi/rtl/axil_register_rd.v
      - xlnx/rtl/verilog-axi/rtl/axi_crossbar.v
      - xlnx/rtl/verilog-axi/rtl/axil_adapter_wr.v
      - xlnx/rtl/verilog-axi/rtl/axil_dp_ram.v
      - xlnx/rtl/verilog-axi/rtl/axi_fifo.v
      - xlnx/rtl/verilog-axi/rtl/axil_register.v
      - xlnx/rtl/verilog-axi/rtl/axi_adapter.v
      - xlnx/rtl/verilog-axi/rtl/axil_adapter.v
      - xlnx/rtl/verilog-axi/rtl/axi_fifo_wr.v
      - xlnx/rtl/verilog-axi/rtl/axi_ram_rd_if.v
      - xlnx/rtl/verilog-axi/rtl/axi_fifo_rd.v
      - xlnx/rtl/verilog-axi/rtl/axi_crossbar_addr.v
      - xlnx/rtl/verilog-axi/rtl/axi_ram_wr_rd_if.v
      - xlnx/rtl/verilog-axi/rtl/axil_cdc_wr.v
      - xlnx/rtl/verilog-axi/rtl/axil_ram.v
      - xlnx/rtl/verilog-axi/rtl/axil_cdc.v
      - xlnx/rtl/verilog-axi/rtl/axil_cdc_rd.v
      - xlnx/rtl/verilog-axi/rtl/axi_axil_adapter_rd.v
      - xlnx/rtl/verilog-axi/rtl/axi_register.v
      - xlnx/rtl/verilog-axi/rtl/axi_axil_adapter_wr.v
    file_type: verilogSource

  verilog_ethernet:
    files:
      - xlnx/rtl/ethernet_axi/verilog-ethernet/lib/axis/rtl/arbiter.v
      - xlnx/rtl/ethernet_axi/verilog-ethernet/lib/axis/rtl/axis_async_fifo.v
      - xlnx/rtl/ethernet_axi/verilog-ethernet/lib/axis/rtl/axis_async_fifo_adapter.v
      - xlnx/rtl/ethernet_axi/verilog-ethernet/lib/axis/rtl/axis_fifo.v
      - xlnx/rtl/ethernet_axi/verilog-ethernet/lib/axis/rtl/priority_encoder.v
      - xlnx/rtl/ethernet_axi/verilog-ethernet/lib/axis/rtl/sync_reset.v
      - xlnx/rtl/ethernet_axi/verilog-ethernet/rtl/arp.v
      - xlnx/rtl/ethernet_axi/verilog-ethernet/rtl/arp_cache.v
      - xlnx/rtl/ethernet_axi/verilog-ethernet/rtl/arp_eth_rx.v
      - xlnx/rtl/ethernet_axi/verilog-ethernet/rtl/arp_eth_tx.v
      - xlnx/rtl/ethernet_axi/verilog-ethernet/rtl/axis_gmii_rx.v
      - xlnx/rtl/ethernet_axi/verilog-ethernet/rtl/axis_gmii_tx.v
      - xlnx/rtl/ethernet_axi/verilog-ethernet/rtl/eth_arb_mux.v
      - xlnx/rtl/ethernet_axi/verilog-ethernet/rtl/eth_axis_rx.v
      - xlnx/rtl/ethernet_axi/verilog-ethernet/rtl/eth_axis_tx.v
      - xlnx/rtl/ethernet_axi/verilog-ethernet/rtl/eth_mac_1g.v
      - xlnx/rtl/ethernet_axi/verilog-ethernet/rtl/eth_mac_1g_rgmii.v
      - xlnx/rtl/ethernet_axi/verilog-ethernet/rtl/eth_mac_1g_gmii.v
      - xlnx/rtl/ethernet_axi/verilog-ethernet/rtl/eth_mac_1g_rgmii_fifo.v
      - xlnx/rtl/ethernet_axi/verilog-ethernet/rtl/eth_mac_1g_gmii_fifo.v
      - xlnx/rtl/ethernet_axi/verilog-ethernet/rtl/iddr.v
      - xlnx/rtl/ethernet_axi/verilog-ethernet/rtl/ip.v
      - xlnx/rtl/ethernet_axi/verilog-ethernet/rtl/ip_arb_mux.v
      - xlnx/rtl/ethernet_axi/verilog-ethernet/rtl/ip_complete.v
      - xlnx/rtl/ethernet_axi/verilog-ethernet/rtl/ip_eth_rx.v
      - xlnx/rtl/ethernet_axi/verilog-ethernet/rtl/ip_eth_tx.v
      - xlnx/rtl/ethernet_axi/verilog-ethernet/rtl/lfsr.v
      - xlnx/rtl/ethernet_axi/verilog-ethernet/rtl/oddr.v
      - xlnx/rtl/ethernet_axi/verilog-ethernet/rtl/rgmii_phy_if.v
      - xlnx/rtl/ethernet_axi/verilog-ethernet/rtl/gmii_phy_if.v
      - xlnx/rtl/ethernet_axi/verilog-ethernet/rtl/ssio_ddr_in.v
      - xlnx/rtl/ethernet_axi/verilog-ethernet/rtl/ssio_sdr_in.v
      - xlnx/rtl/ethernet_axi/verilog-ethernet/rtl/ssio_sdr_out.v
      - xlnx/rtl/ethernet_axi/verilog-ethernet/rtl/udp.v
      - xlnx/rtl/ethernet_axi/verilog-ethernet/rtl/udp_checksum_gen.v
      - xlnx/rtl/ethernet_axi/verilog-ethernet/rtl/udp_complete.v
      - xlnx/rtl/ethernet_axi/verilog-ethernet/rtl/udp_ip_rx.v
      - xlnx/rtl/ethernet_axi/verilog-ethernet/rtl/udp_ip_tx.v
      - xlnx/rtl/ethernet_axi/verilog-ethernet/rtl/ssio_ddr_out.v
    file_type: verilogSource

  ethernet_axi:
    files:
      - xlnx/rtl/ethernet_axi/rggen-verilog-rtl/rggen_adapter_common.v
      - xlnx/rtl/ethernet_axi/rggen-verilog-rtl/rggen_address_decoder.v
      - xlnx/rtl/ethernet_axi/rggen-verilog-rtl/rggen_apb_adapter.v
      - xlnx/rtl/ethernet_axi/rggen-verilog-rtl/rggen_apb_bridge.v
      - xlnx/rtl/ethernet_axi/rggen-verilog-rtl/rggen_axi4lite_adapter.v
      - xlnx/rtl/ethernet_axi/rggen-verilog-rtl/rggen_axi4lite_bridge.v
      - xlnx/rtl/ethernet_axi/rggen-verilog-rtl/rggen_axi4lite_skid_buffer.v
      - xlnx/rtl/ethernet_axi/rggen-verilog-rtl/rggen_bit_field.v
      - xlnx/rtl/ethernet_axi/rggen-verilog-rtl/rggen_bit_field_w01trg.v
      - xlnx/rtl/ethernet_axi/rggen-verilog-rtl/rggen_default_register.v
      - xlnx/rtl/ethernet_axi/rggen-verilog-rtl/rggen_external_register.v
      - xlnx/rtl/ethernet_axi/rggen-verilog-rtl/rggen_indirect_register.v
      - xlnx/rtl/ethernet_axi/rggen-verilog-rtl/rggen_mux.v
      - xlnx/rtl/ethernet_axi/rggen-verilog-rtl/rggen_register_common.v
      - xlnx/rtl/ethernet_axi/rggen-verilog-rtl/rggen_rtl_macros.vh
      - xlnx/rtl/ethernet_axi/rggen-verilog-rtl/rggen_wishbone_adapter.v
      - xlnx/rtl/ethernet_axi/rggen-verilog-rtl/rggen_wishbone_bridge.v
      - xlnx/rtl/ethernet_axi/csr_out/eth_csr.v
      - xlnx/rtl/ethernet_axi/rtl/clk_mgmt_eth.sv
      - xlnx/rtl/ethernet_axi/rtl/pkt_fifo.sv
      - xlnx/rtl/ethernet_axi/rtl/ethernet_wrapper.sv
      - xlnx/rtl/ethernet_axi/rtl/eth_fifo.sv
      - xlnx/rtl/ethernet_axi/rtl/bytewrite_tdp_ram_rf.v
      - xlnx/rtl/axil_to_axi.sv
    file_type: verilogSource

  coremark_nox:
    files:
      - xlnx/rtl/nox_coremark.sv
      - xlnx/rtl/axi_rom_wrapper.sv
      - sw/coremark/boot_rom.sv
      - xlnx/rtl/axi_mem_wrapper_coremark.sv
    file_type: systemVerilogSource

  synth_nox:
    files:
      - xlnx/rtl/clk_mgmt.sv
      - xlnx/rtl/nox_soc.sv
      - xlnx/rtl/axi_interconnect_wrapper.sv
      - xlnx/rtl/axi_crossbar_wrapper.sv
      - xlnx/rtl/axi_rom_wrapper.sv
      - xlnx/rtl/axi_uart_wrapper.sv
      - sw/bootloader/output/boot_rom.sv
      - xlnx/rtl/axi_mem_wrapper.sv
      - xlnx/rtl/cdc_2ff_sync.sv
      - xlnx/rtl/nox_wrapper.sv
      - xlnx/rtl/rst_ctrl.sv
      - xlnx/rtl/axi_gpio.sv
      - xlnx/rtl/axi_spi_master.sv
      - xlnx/rtl/cdc_async_fifo.sv
      - xlnx/rtl/axi_mtimer.sv
    file_type: systemVerilogSource

  tb:
    files:
      - tb/axi_mem_wbp.sv
      - tb/axi_mem.sv
    file_type: systemVerilogSource

  files_tcl:
    files:
      - xlnx/tcl/call_viv_hooks.tcl: { file_type: tclSource }
      - xlnx/tcl/vivado_hook_synth_design_pre.tcl: { file_type: user, copyto: vivado_hook_synth_design_pre.tcl }
      - xlnx/tcl/vivado_hook_write_bitstream_pre.tcl: { file_type: user, copyto: vivado_hook_write_bitstream_pre.tcl }
      - xlnx/tcl/vivado_hook_opt_design_post.tcl: { file_type: user, copyto: vivado_hook_opt_design_post.tcl }

  nexysV_constraints:
    files:
      - xlnx/xdc/nexys_video.xdc: {file_type: xdc}

  k7_qmtech_constraints:
    files:
      - xlnx/xdc/kintex7_qmtech.xdc: {file_type: xdc}

  kc705_constraints:
    files:
      - xlnx/xdc/kc705.xdc: {file_type: xdc}

  arty7_constraints:
    files:
      - xlnx/xdc/arty_7.xdc: {file_type: xdc}

  stvl_constraints:
    files:
      - xlnx/xdc/stvl.xdc: {file_type: xdc}

parameters:
  DISPLAY_TEST:
    datatype: bool
    default : false
    paramtype: vlogdefine
  NEXYS_VIDEO_50MHz:
    datatype: bool
    default : true
    paramtype: vlogdefine
  QMTECH_KINTEX_7_100MHz:
    datatype: bool
    default : true
    paramtype: vlogdefine
  ARTY_A7_50MHz:
    datatype: bool
    default : true
    paramtype: vlogdefine
  KC705_KINTEX_7_100MHz:
    datatype: bool
    default : true
    paramtype: vlogdefine

targets:
  default: &default
    filesets: [rtl_nox,verilog_axi,uart_axi]
    toplevel: nox_soc

  lint:
    default_tool: verilator
    filesets: [rtl_nox]
    tools:
      verilator:
        mode: lint-only
        verilator_options: ["--Wno-UNOPTFLAT"]
    toplevel: nox_soc

  nv_synth:
    <<: *default
    default_tool : vivado
    parameters:
      - NEXYS_VIDEO_50MHz
      - DISPLAY_TEST
    description : Nexys Video board synthesis
    filesets_append:
      - synth_nox
      - nexysV_constraints
      - files_tcl
      - verilog_ethernet
      - ethernet_axi
    tools:
      vivado:
        part : xc7a200tsbg484-1
    toplevel: nox_soc

  x7_synth:
    <<: *default
    default_tool : vivado
    parameters:
      - QMTECH_KINTEX_7_100MHz
      - DISPLAY_TEST
    description : Kintex 7 board synthesis
    filesets_append:
      - synth_nox
      - k7_qmtech_constraints
      - files_tcl
      - verilog_ethernet
      - ethernet_axi
    tools:
      vivado:
        part : xc7k325tffg676-1
    toplevel: nox_soc

  stvl_synth:
    <<: *default
    default_tool : vivado
    parameters:
      - KC705_KINTEX_7_100MHz
      - DISPLAY_TEST
    description : Kintex 7 board synthesis
    filesets_append:
      - synth_nox
      - stvl_constraints
      - files_tcl
      - verilog_ethernet
      - ethernet_axi
    tools:
      vivado:
        part : xc7k325tffg676-1
    toplevel: nox_soc

  a7_synth:
    <<: *default
    default_tool : vivado
    parameters:
      - ARTY_A7_50MHz
      - DISPLAY_TEST
    description : Arty A7 - 35 board synthesis
    filesets_append:
      - synth_nox
      - arty7_constraints
      - files_tcl
    tools:
      vivado:
        part : xc7a35ticsg324-1L
    toplevel: nox_soc

  coremark_synth:
    <<: *default
    default_tool : vivado
    parameters:
      - ARTY_A7_50MHz
      - DISPLAY_TEST
    description : Arty A7 - 35 board synthesis
    filesets_append:
      - coremark_nox
      - arty7_constraints
      - files_tcl
    tools:
      vivado:
        part : xc7a35ticsg324-1L
    toplevel: nox_coremark

  kc705_synth:
    <<: *default
    default_tool : vivado
    parameters:
      - KC705_KINTEX_7_100MHz
      - DISPLAY_TEST
    description : Kintex 7 board synthesis
    filesets_append:
      - synth_nox
      - kc705_constraints
      - files_tcl
    tools:
      vivado:
        part : xc7k325tffg900-2
    toplevel: nox_soc
